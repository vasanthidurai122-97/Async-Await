<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width , initial-scale =1.0">
        <meta charset="UTF-8">
        <title>Async/Await</title>
        <style>
            h2{
                text-align: center;
            } 
            .btns{
                font-size: 15px;
                padding: 10px 20px;
                border-radius: 0.5%;
                border: none;
                color: blue;
                margin:10px;
            }
            p{
                font-size: 20px;

            }

        </style>
    </head>
    <body>
         <h2>Async/Await Function</h2>
         
            <label>Name : <input type="text" id="uname"></label><br><br>
            <label>Age :<input type="number" id="uage"></label><br><br>
            <button  onclick="getUserData()" class="btns">Show Data</button>
            <button  onclick="getUserPromise()" class="btns">Promise Data</button>
            <button  onclick="getUserAsync()" class="btns">Async Data</button>


           <p id="showMsg">Show UserData..</p>
           <p id="showPromise">Promise Data..</p>
           <p id="showAsync">Async Data</p>

    <script>
      // callback  Function
        function userData(name,age,callback){
            setTimeout(() => {
                callback(name,age);
            }, 1000);
        }

        function displayUserData(name,age){
         document.getElementById("showMsg").textContent = `Callback â†’ Name: ${name}, Age: ${age}`;
        }

        function getUserData(){
            const name = document.getElementById("uname").value;
            const age = document.getElementById("uage").value;

            if(name === "" || age === ""){
                document.getElementById("showMsg").textContent = "Please Enter Your Data";
                return;
            }
    
            userData(name,age,displayUserData);
        }

    // create a  Promise function
        function userPromise(name,age){
            return new Promise((resolve,reject) =>{
                setTimeout(()=>{
                    if(!name||!age){
                        reject("Please enter name & age");
                    }
                    else{
                        resolve({name,age});
                    }
                },1000);
            })

        }
        function getUserPromise(){
            const name = document.getElementById("uname").value;
            const age = document.getElementById("uage").value;
            userPromise(name,age)
            .then((user)=>{
                document.getElementById("showPromise").textContent = `Promise -> Name : ${user.name}, Age : ${user.age}`;

            })
            .catch((error)=>{
                document.getElementById("showPromise").textContent = `Error : ${error}`;
            })
        
        }

    //  Async/Await function
       
        async function getUserAsync() {
             const name = document.getElementById("uname").value;
             const age = document.getElementById("uage").value;

             try{
                const user = await userPromise(name,age);
                document.getElementById("showAsync").textContent = ` Async -> Name : ${user.name}, Age : ${user.age}`;
             }
             catch(error){
                document.getElementById("showAsync").textContent = `Error : ${error}`;

             }
        

            
         }
    </script>
    </body>
</html>